# üîÅ APIKeyRotator ‚Äî –û–±—Ö–æ–¥ –ª–∏–º–∏—Ç–æ–≤ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö API —á–µ—Ä–µ–∑ —Ä–æ—Ç–∞—Ü–∏—é –∫–ª—é—á–µ–π

> üöÄ Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É API-–∫–ª—é—á–∞–º–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤.  
> –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è OpenAI, SerpAPI, DeepL, ElevenLabs –∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ.

---

## ‚ú® –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–ú–Ω–æ–≥–∏–µ API-—Å–µ—Ä–≤–∏—Å—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ–¥–∏–Ω –∫–ª—é—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3 RPM –∏–ª–∏ 5000 —Ç–æ–∫–µ–Ω–æ–≤ –≤ –º–∏–Ω—É—Ç—É).  
–° `APIKeyRotator` –≤—ã –º–æ–∂–µ—Ç–µ:

- –£–∫–∞–∑–∞—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π** –≤ `.env`
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±—É–¥–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è** –º–µ–∂–¥—É –Ω–∏–º–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `429 Too Many Requests`)
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É** ‚Äî –∫–ª—é—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ –∫—Ä—É–≥—É
- **–£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** –±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install apikeyrotator
```
---

–ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π):
```bash
git clone https://github.com/PrimeevolutionZ/apikeyrotator.git
cd apikeyrotator
pip install -e .
```
‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
API_KEYS=sk-yourkey1,sk-yourkey2,sk-yourkey3
```
>‚úÖ –ö–ª—é—á–∏ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤ –ª–∏—á–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–∞—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (OpenAI, SerpAPI –∏ —Ç.–¥.) 
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–¥–µ:
```python
from apikeyrotator import APIKeyRotator

# –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å –∫–ª—é—á–æ–º
def make_headers(api_key: str) -> dict:
    return {
        "Authorization": f"Bearer {api_key}",
        "Content-Type": "application/json"
    }

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—Ç–∞—Ç–æ—Ä–∞
rotator = APIKeyRotator()

# –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenAI
try:
    response = rotator.request_with_rotation(
        method="POST",
        url="https://api.openai.com/v1/chat/completions",
        headers_fn=make_headers,
        json={
            "model": "gpt-3.5-turbo",
            "messages": [{"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"}]
        }
    )
    print("‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:", response.status_code)
    print(response.json())

except Exception as e:
    print("‚ùå –û—à–∏–±–∫–∞:", e)
```
---
>‚ùó –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:
```python
from apikeyrotator.exceptions import NoAPIKeysError, APIKeyExhaustedError

try:
    response = rotator.request_with_rotation(...)
except NoAPIKeysError:
    print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã API –∫–ª—é—á–∏ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª!")
except APIKeyExhaustedError:
    print("‚ùå –í—Å–µ –∫–ª—é—á–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–µ —É–¥–∞–ª—Å—è.")
except Exception as e:
    print(f"‚ùå –î—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞: {e}")
```
---
–í –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤ –Ω–∞–¥–µ—é—Å—å –ø–æ–ª—É—á–∏–ª–æ—Å—å —á—Ç–æ —Ç–æ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–µ. 